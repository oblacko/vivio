# ============================================
# Vivio Environment Variables Template
# ============================================
# Скопируйте этот файл в .env.local для локальной разработки
# Для production настройте переменные в Vercel Dashboard
# 
# Обязательные переменные отмечены как [REQUIRED]
# Опциональные переменные отмечены как [OPTIONAL]
# ============================================

# ============================================
# DATABASE - PostgreSQL
# ============================================
# [REQUIRED] Основная строка подключения к PostgreSQL
# Для Vercel: используйте Vercel Postgres и скопируйте DATABASE_URL из Dashboard
# Для локальной разработки: используйте локальный PostgreSQL или Supabase
DATABASE_URL="postgresql://user:password@host:5432/database?sslmode=require"

# ============================================
# AUTHENTICATION - NextAuth.js
# ============================================
# [REQUIRED] Секретный ключ для NextAuth.js (минимум 32 символа)
# Генерация: openssl rand -base64 32
AUTH_SECRET="generate-with-openssl-rand-base64-32"
NEXTAUTH_SECRET="generate-with-openssl-rand-base64-32"

# [REQUIRED] URL приложения
# Development: http://localhost:3001
# Production: https://your-domain.vercel.app
AUTH_URL="http://localhost:3001"
NEXTAUTH_URL="http://localhost:3001"
NEXT_PUBLIC_BASE_URL="http://localhost:3001"

# [REQUIRED] Google OAuth Credentials
# Получить: https://console.cloud.google.com/apis/credentials
# 1. Создайте OAuth 2.0 Client ID
# 2. Добавьте Authorized redirect URIs: {AUTH_URL}/api/auth/callback/google
AUTH_GOOGLE_ID="your-google-client-id.apps.googleusercontent.com"
AUTH_GOOGLE_SECRET="your-google-client-secret"

# ============================================
# EXTERNAL APIS
# ============================================
# [REQUIRED] Grok API для генерации видео
# Получить: https://kie.ai
GROK_API_KEY="your-grok-api-key"
GROK_API_URL="https://api.kie.ai/api/v1"

# [OPTIONAL] DeepSeek API для генерации AI вайбов
# Получить: https://platform.deepseek.com
DEEPSEEK_API_KEY="your-deepseek-api-key"
DEEPSEEK_API_URL="https://api.deepseek.com"

# ============================================
# FILE STORAGE - Vercel Blob
# ============================================
# [REQUIRED] Vercel Blob Storage для медиа файлов
# Получить: Vercel Dashboard → Storage → Blob → Create
BLOB_READ_WRITE_TOKEN="vercel_blob_xxxxxxxxxxxxxxxxxx"

# ============================================
# CACHING & RATE LIMITING - Redis
# ============================================
# Выберите один из вариантов:

# Вариант 1: Vercel KV (рекомендуется для Vercel) [OPTIONAL]
# Получить: Vercel Dashboard → Storage → KV → Create
KV_REST_API_URL="https://your-kv-store.kv.vercel-storage.com"
KV_REST_API_TOKEN="your-kv-token"

# Вариант 2: External Redis (Upstash, Redis Labs и т.д.) [OPTIONAL]
# Получить: https://upstash.com или https://redis.com
REDIS_URL="redis://default:password@host:port"

# ВАЖНО: Если не настроен ни Vercel KV, ни External Redis,
# rate limiting и кеширование работать не будут

# ============================================
# WEBHOOKS [OPTIONAL]
# ============================================
# URL для webhook callbacks от Grok API
# Production: https://your-domain.vercel.app
WEBHOOK_URL="https://your-domain.vercel.app"
WEBHOOK_SECRET="your-webhook-secret"

# ============================================
# RATE LIMITING [OPTIONAL]
# ============================================
# Лимиты запросов в минуту для разных типов пользователей
RATE_LIMIT_FREE=3
RATE_LIMIT_PRO=10

# ============================================
# CACHE CONTROL [OPTIONAL]
# ============================================
# Отключить кеширование в production (для отладки)
DISABLE_CACHE=false

# URL production приложения для скриптов очистки кеша
PRODUCTION_URL="https://your-domain.vercel.app"

# Токен для защиты API endpoint очистки кеша
CACHE_CLEAR_TOKEN="your-secure-cache-clear-token"

# ============================================
# RAILWAY STORAGE [LEGACY - OPTIONAL]
# ============================================
# Используется только если нужна S3-совместимая альтернатива Vercel Blob
RAILWAY_ENDPOINT_URL="https://storage.railway.app"
RAILWAY_BUCKET_NAME="your-bucket-name"
RAILWAY_ACCESS_KEY_ID="your-access-key"
RAILWAY_SECRET_ACCESS_KEY="your-secret-key"

# ============================================
# ИНСТРУКЦИИ ПО НАСТРОЙКЕ
# ============================================
# 
# 1. Для локальной разработки:
#    cp env.template .env.local
#    Заполните все [REQUIRED] переменные
#
# 2. Для production (Vercel):
#    - Перейдите в Settings → Environment Variables
#    - Добавьте все [REQUIRED] переменные
#    - Используйте Vercel Postgres, Vercel KV и Vercel Blob
#
# 3. Генерация секретов:
#    AUTH_SECRET: openssl rand -base64 32
#    WEBHOOK_SECRET: openssl rand -hex 32
#
# 4. Проверка конфигурации:
#    После настройки запустите: npm run dev
#    Проверьте health check: http://localhost:3001/api/health
#
# 5. См. документацию: docs/DEPLOYMENT.md
